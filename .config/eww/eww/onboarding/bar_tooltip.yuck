;; ============================
;; Bar Tooltip + Multi Overlay (Onboarding)
;; ============================

(defwindow bar-tooltip
  :monitor 0
  :stacking "fg"
  :windowtype "normal"
  :wm-ignore true
  :exclusive false         ;; ðŸ”¥ FIX
  :focusable false         ;; ðŸ”¥ FIX

  ;; ðŸ‘‡ THIS IS THE FIX
  ;; :visible {onb_open && onb_step == 1}

  ;; Covers bar + tooltip area
  :geometry (geometry
              :x "0%"
              :y "0%"
              :width "100%"
              :height "180px"
              :anchor "top left")

  ;; ONE revealer controls everything
  (revealer
    ;; :reveal {onb_open && onb_step == 1}

 :reveal true
  :transition "slidedown"
  :duration "250ms"    
  (box
      :orientation "v"
      :space-evenly false

      ;; ============================
      ;; OVERLAY STRIP (ON THE BAR)
      ;; ============================
      (centerbox

        :class "bar-overlay-container"
        :orientation "h"

        ;; -------- LEFT --------
        (box
          :class "bar-overlay"
          :halign "start"
          :valign "center"

          (label
            :class "bar-overlay-text"
            :text "Launcher & Layout & Opened apps")
        )

        ;; -------- CENTER --------
        (box
          :class "bar-overlay"
          :halign "center"
          :valign "center"

          (label
            :class "bar-overlay-text"
            :text "Active window")
        )

        ;; -------- RIGHT --------
        (box
          :class "bar-overlay"
          :halign "end"
          :valign "center"
          :padding "0 12px"

          (label
            :class "bar-overlay-text"
            :text "System Widgets & clock & System tray")
        )
      )

      ;; ============================
      ;; TOOLTIP CARD (BELOW BAR)
      ;; ============================
      (box
        :orientation "h"
        :halign "center"
        :space-evenly  false

        (box
          :class "onboarding-tooltip"
          :orientation "v"
          ;; :spacing 6
          :space-evenly  false

          (label
            :class "onb-title"
            :text "Top Bar")

             (label
              :class "onb-text"
              :wrap true
              :unindent true
              :text "
        â€¢ Left â€” launchers ,layout and opened apps
        â€¢ Center â€”  active window info
        â€¢ Right â€” system widgets and time
         ")
(label
  :class "onb-text"
  :wrap true
  :markup "â€¢ <span foreground=\"#c678dd\">ó°•°</span>  Main menu :                                                           
 - <b><span foreground=\"#ffffff\">Left-Click</span></b> to open Terminal
 - <b><span foreground=\"#ffffff\">Right-Click</span></b> to open Launcher (Rofi)
  "
)
(label
  :class "onb-text"
  :wrap true
  :markup
"Right-side widgets:  (collapsed widgets) :
â€¢ <span foreground=\"#98be65\">â–³</span>  : system tray 
â€¢ <span foreground=\"#ff6c6b\">ó°¤‚</span>   : CPU, memory, and battery status
â€¢ <span foreground=\"#c678dd\">ó°–¯</span>   : Update , Language , Volume and Disk status
â€¢ <b><span foreground=\"#46d9ff\">x</span></b>   : wallpaper launcher
â€¢ <b><span foreground=\"#ffffff\">ó°Œ¶</span></b>   : Tooltip (current opened app)
"
)
            

        (label
        :class "onb-text"
        :markup "<b>Tip : </b>Press  <b><span foreground=\"#46d9ff\">Win + `</span></b> to open main widget , <b><span foreground=\"#46d9ff\">Alt + `</span></b> 2nd system widget. "
)

  ;; ============================
  ;; NAVIGATION (STEP 1)
  ;; ============================
  (box
    :class "onb-footer"
    :orientation "h"
    :halign "end"
    :spacing 10

    (button
      :class "onb-btn"
      :onclick "eww close bar-tooltip; eww open onboarding-welcome"
      "Back")

    (button
      :class "onb-btn onb-btn-Apply"
      :onclick "eww close bar-tooltip; eww open onboarding-workspaces"
      "Next")
  )

        )
      )
    )
  )
)

